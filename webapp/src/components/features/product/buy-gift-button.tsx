// components/features/product/buy-gift-button.tsx
"use client";
import { useDevice } from "@/components/providers/device-provider";

interface BuyGiftButtonProps {
  quantity: number;
  price: number;
  outOfStock?: boolean;
  onClick?: () => void;
  loading?: boolean;
}

export default function BuyGiftButton({
  quantity,
  price,
  outOfStock,
  onClick = () => {},
  loading = false,
}: BuyGiftButtonProps) {
  const { isMobile } = useDevice();

  const handleBuyClick = () => onClick();
  const getButtonText = () => {
    if (outOfStock) {
      return "Нет в наличии";
    }
    if (loading) {
      return "Обработка...";
    }
    return `Купить ${quantity} за ${quantity * price}`;
  };
  return (
    <div
      className="pt-2 px-4 pb-7"
      style={{
        paddingBottom: isMobile ? "28px" : "8px",
      }}
    >
      <button
        className="buy-gift-btn font-mono w-full"
        onClick={handleBuyClick}
        disabled={loading || outOfStock}
        style={{
          opacity: loading || outOfStock ? "0.5" : "1",
        }}
      >
        {getButtonText()}
        {!outOfStock && !loading && (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width={19}
            height={18}
            viewBox="0 0 19 18"
            fill="none"
          >
            <g clipPath="url(#clip0_63_4732)">
              <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M8.55826 0.937234L6.35348 5.21863C6.22606 5.46606 5.98155 5.63543 5.7009 5.67064L1.32514 6.21972C1.03569 6.25606 0.771597 6.40007 0.587601 6.62193C0.191939 7.09901 0.266041 7.79994 0.753114 8.1875L2.0231 9.55817C2.63728 10.0469 3.85388 10.6134 4.63724 10.504L7.88512 10.0311C7.90275 10.0286 7.96834 10.0163 8.06398 9.99825C8.49007 9.91797 9.51267 9.72529 9.54866 9.79464C9.59449 9.88294 8.61031 10.3046 8.16783 10.4941C8.06123 10.5398 7.98606 10.572 7.96433 10.5828L5.42941 11.6863C4.50646 12.1458 4.16144 13.2602 4.01397 14.264L3.71245 16.3163C3.68068 16.5325 3.71809 16.7531 3.81952 16.9476C4.09064 17.4678 4.74081 17.674 5.27175 17.4085L9.04427 15.5217C9.31134 15.3881 9.62847 15.3921 9.8919 15.5325L13.5331 17.4719C13.7525 17.5888 14.0037 17.6353 14.2515 17.6048C14.9053 17.5245 15.3688 16.9402 15.2868 16.2998L14.7141 11.8267C14.6898 11.6372 14.7572 11.4474 14.8964 11.3136L18.3427 8.00027C18.518 7.83182 18.6293 7.60988 18.6585 7.37109C18.7292 6.79128 18.3066 6.26511 17.7147 6.19587L13.3544 5.68584C12.973 5.64123 12.6405 5.41094 12.4704 5.07365L10.3882 0.944732C10.29 0.750015 10.1298 0.59183 9.93184 0.494022C9.4276 0.244884 8.81262 0.443318 8.55826 0.937234Z"
                fill="#FCBFFF"
              />
              <mask
                id="mask0_63_4732"
                style={{ maskType: "alpha" }}
                maskUnits="userSpaceOnUse"
                x={0}
                y={0}
                width={19}
                height={18}
              >
                <path
                  d="M9.31485 9.6021C9.31485 9.6021 9.31435 9.60257 9.31298 9.60365C9.3141 9.60265 9.31485 9.6021 9.31485 9.6021ZM8.09029 10.8725L8.09773 10.8693L8.10499 10.8657C8.10499 10.8657 8.10507 10.8656 8.10537 10.8655C8.10696 10.8648 8.11371 10.8616 8.1286 10.8551C8.14462 10.848 8.16572 10.8388 8.19171 10.8276C8.22071 10.8151 8.25425 10.8008 8.29199 10.7846C8.32249 10.7715 8.35574 10.7573 8.3916 10.7419C8.55028 10.6738 8.75249 10.5863 8.95004 10.4967C9.14596 10.4079 9.34402 10.3142 9.49181 10.2337C9.56355 10.1946 9.63585 10.1521 9.69177 10.1098C9.71723 10.0906 9.75799 10.0578 9.79233 10.0129C9.81068 9.98885 9.92523 9.83432 9.82902 9.64891C9.78097 9.55634 9.70468 9.51536 9.67135 9.50014C9.63337 9.48281 9.59895 9.47538 9.57862 9.47177C9.53693 9.46441 9.4959 9.46346 9.46608 9.46367C9.40286 9.46411 9.32602 9.47078 9.24771 9.47969C9.0881 9.49787 8.88346 9.53006 8.68304 9.56429C8.48133 9.59875 8.27855 9.63622 8.12103 9.66574C8.07747 9.6739 8.03941 9.68107 8.00531 9.68749C7.97555 9.6931 7.94881 9.69814 7.92404 9.70279C7.89869 9.70753 7.87819 9.71132 7.86277 9.71412C7.85053 9.71633 7.84426 9.71739 7.842 9.71777C7.8414 9.71787 7.841 9.71795 7.841 9.71795L7.83936 9.71818L4.59332 10.1908L4.59246 10.1909C4.28197 10.234 3.84396 10.1434 3.38259 9.96124C2.93857 9.78595 2.5177 9.54378 2.238 9.32515L0.984772 7.97255L0.968476 7.95496L0.949714 7.94004C0.600191 7.66193 0.548913 7.16337 0.830701 6.82359C0.962715 6.66442 1.15349 6.5597 1.36429 6.53324L5.74005 5.98416C6.12217 5.93621 6.4582 5.70519 6.63429 5.36323L8.83908 1.08183C9.01282 0.744466 9.43883 0.602988 9.79162 0.777297C9.92898 0.845155 10.0388 0.954245 10.1057 1.08695L12.1879 5.21586C12.4068 5.64983 12.8327 5.94297 13.3174 5.99968L17.6777 6.50971C18.1017 6.5593 18.3933 6.93277 18.3445 7.33272C18.3242 7.49848 18.2469 7.65369 18.1235 7.77229L14.6771 11.0857C14.4667 11.2879 14.3632 11.5767 14.4003 11.8667L14.9731 16.3398C15.032 16.8005 14.6987 17.2312 14.2128 17.291C14.0292 17.3136 13.8433 17.2789 13.6815 17.1928L10.0403 15.2534C9.68646 15.0649 9.26125 15.0595 8.90268 15.2389L5.13015 17.1256C4.75033 17.3156 4.28935 17.1655 4.09961 16.8015C4.02881 16.6656 4.00292 16.5123 4.02498 16.3621L4.32649 14.3098C4.47322 13.3111 4.80146 12.3566 5.56315 11.9726L8.09029 10.8725Z"
                  fill="#FFECBF"
                  stroke="#E6860D"
                  strokeWidth="0.632184"
                />
              </mask>
              <g mask="url(#mask0_63_4732)">
                <path
                  fillRule="evenodd"
                  clipRule="evenodd"
                  d="M6.98677 6.4801L9.19156 2.1987C9.44592 1.70479 10.0609 1.50636 10.5651 1.7555C10.7631 1.85331 10.9233 2.0115 11.0215 2.20621L13.1037 6.33511C13.2738 6.67241 13.6063 6.9027 13.9877 6.94732L18.348 7.45735C18.9399 7.52659 19.3625 8.05276 19.2917 8.63256C19.2626 8.87135 19.1514 9.0933 18.9761 9.26174L15.5297 12.5751C15.3905 12.7089 15.3231 12.8986 15.3474 13.0881L15.9201 17.5614C16.0021 18.2018 15.5386 18.7859 14.8848 18.8664C14.637 18.8967 14.3858 18.8502 14.1664 18.7334L10.5252 16.7939C10.2618 16.6536 9.94464 16.6496 9.67759 16.7832L5.90506 18.6701C5.37412 18.9356 4.72393 18.7292 4.45282 18.2092C4.35139 18.0146 4.31398 17.794 4.34575 17.5778L4.64727 15.5255C4.79474 14.5217 5.13975 13.4073 6.06271 12.9478L8.59764 11.8443C8.70951 11.7886 9.57881 11.4021 9.52193 11.2926C9.47786 11.2077 8.61468 11.2791 8.51841 11.2926L5.27054 11.7655C4.4872 11.8749 3.27058 11.3083 2.65639 10.8196L1.38642 9.44897C0.899343 9.06142 0.82524 8.36049 1.2209 7.88341C1.4049 7.66154 1.66899 7.51753 1.95845 7.4812L6.3342 6.93211C6.61486 6.8969 6.85936 6.72754 6.98677 6.4801Z"
                  fill="#9A1AC5"
                />
              </g>
              <path
                d="M9.31533 9.60233C9.31533 9.60233 9.31484 9.60281 9.31347 9.6039C9.31459 9.6029 9.31533 9.60233 9.31533 9.60233ZM8.09078 10.8728L8.09822 10.8695L8.10548 10.8659C8.10548 10.8659 8.10556 10.8659 8.10586 10.8657C8.10745 10.865 8.1142 10.8619 8.12909 10.8553C8.1451 10.8482 8.16621 10.8391 8.1922 10.8279C8.2212 10.8154 8.25472 10.801 8.29248 10.7849C8.32298 10.7718 8.35623 10.7575 8.39209 10.7421C8.55076 10.674 8.75297 10.5865 8.95053 10.497C9.14645 10.4082 9.34451 10.3144 9.4923 10.2339C9.56404 10.1948 9.63634 10.1523 9.69226 10.1101C9.71772 10.0909 9.75848 10.058 9.79282 10.0131C9.81117 9.9891 9.92572 9.83457 9.8295 9.64916C9.78146 9.55658 9.70517 9.51562 9.67184 9.5004C9.63386 9.48306 9.59944 9.47561 9.57911 9.47203C9.53742 9.46465 9.49639 9.46371 9.46657 9.46392C9.40335 9.46436 9.32651 9.47103 9.2482 9.47994C9.08859 9.49812 8.88395 9.5303 8.68353 9.56453C8.48182 9.59898 8.27904 9.63646 8.12152 9.66598C8.07796 9.67415 8.0399 9.68131 8.0058 9.68774C7.97604 9.69335 7.9493 9.6984 7.92453 9.70303C7.89918 9.70777 7.87868 9.71158 7.86326 9.71436C7.85102 9.71657 7.84475 9.71763 7.84249 9.71802C7.84189 9.71812 7.84149 9.71818 7.84149 9.71818L7.83985 9.71842L4.59381 10.1911L4.59295 10.1912C4.28246 10.2343 3.84445 10.1436 3.38308 9.96149C2.93906 9.78619 2.51819 9.54403 2.23849 9.32541L0.985262 7.9728L0.968966 7.95521L0.950202 7.94028C0.600679 7.66218 0.549401 7.16362 0.831189 6.82384C0.963203 6.66466 1.15398 6.55993 1.36478 6.53349L5.74054 5.98441C6.12266 5.93646 6.45868 5.70543 6.63478 5.36348L8.83957 1.08208C9.01331 0.74471 9.43931 0.603232 9.79211 0.777541C9.92945 0.845401 10.0393 0.954489 10.1062 1.08719L12.1884 5.2161C12.4073 5.65006 12.8332 5.94322 13.3179 5.99991L17.6783 6.50996C18.1022 6.55955 18.3938 6.933 18.3449 7.33295C18.3249 7.49871 18.2474 7.65393 18.124 7.77254L14.6776 11.0859C14.4672 11.2882 14.3637 11.577 14.4008 11.8669L14.9736 16.3401C15.0325 16.8008 14.6991 17.2315 14.2132 17.2912C14.0296 17.3138 13.8437 17.2792 13.682 17.1931L10.0408 15.2536C9.68695 15.0651 9.26174 15.0598 8.90317 15.2391L5.13064 17.1259C4.75082 17.3159 4.28984 17.1657 4.1001 16.8017C4.0293 16.6658 4.00341 16.5125 4.02547 16.3624L4.32698 14.3101C4.47371 13.3114 4.80195 12.3569 5.56364 11.9728L8.09078 10.8728Z"
                stroke="#6E296D"
                strokeWidth="0.632184"
              />
            </g>
            <defs>
              <clipPath id="clip0_63_4732">
                <rect
                  width="18.3333"
                  height="17.227"
                  fill="white"
                  transform="translate(0.333252 0.386475)"
                />
              </clipPath>
            </defs>
          </svg>
        )}
      </button>
    </div>
  );
}
